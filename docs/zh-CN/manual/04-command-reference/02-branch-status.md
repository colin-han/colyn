# å‘½ä»¤å‚è€ƒ â€” åˆ†æ”¯ä¸çŠ¶æ€

[â† è¿”å›å‘½ä»¤å‚è€ƒ](README.md)

---

## colyn checkout

åœ¨ Worktree ä¸­åˆ‡æ¢æˆ–åˆ›å»ºåˆ†æ”¯ã€‚

### è¯­æ³•

```bash
colyn checkout [worktree-id] <branch> [é€‰é¡¹]

# åˆ«å
colyn co [worktree-id] <branch> [é€‰é¡¹]
```

### å‚æ•°

| å‚æ•° | å¿…å¡« | è¯´æ˜ |
|------|------|------|
| `worktree-id` | å¦ | Worktree çš„ IDï¼Œçœç•¥æ—¶ä½¿ç”¨å½“å‰ worktree |
| `branch` | æ˜¯ | ç›®æ ‡åˆ†æ”¯åç§° |

### é€‰é¡¹

| é€‰é¡¹ | è¯´æ˜ |
|------|------|
| `--no-fetch` | è·³è¿‡ä»è¿œç¨‹è·å–åˆ†æ”¯ä¿¡æ¯ |

### åŠŸèƒ½è¯´æ˜

`colyn checkout` å…è®¸åœ¨ worktree ä¸­åˆ‡æ¢åˆ†æ”¯ï¼Œå¤ç”¨å·²æœ‰ worktree è¿›è¡Œä¸åŒåˆ†æ”¯çš„å¼€å‘ã€‚

**å‰ç½®æ£€æŸ¥ï¼š**
- æœ‰æœªæäº¤æ›´æ”¹ â†’ æ‹’ç»åˆ‡æ¢
- å½“å‰åˆ†æ”¯æœªåˆå¹¶åˆ°ä¸»åˆ†æ”¯ â†’ è­¦å‘Šå¹¶è¦æ±‚ç¡®è®¤
- ç›®æ ‡åˆ†æ”¯æ˜¯ä¸»åˆ†æ”¯ â†’ æ‹’ç»åˆ‡æ¢
- ç›®æ ‡åˆ†æ”¯å·²åœ¨å…¶ä»– worktree ä½¿ç”¨ â†’ æ‹’ç»åˆ‡æ¢

**åˆ†æ”¯å¤„ç†ï¼š**
1. æœ¬åœ°åˆ†æ”¯å­˜åœ¨ â†’ ç›´æ¥åˆ‡æ¢
2. è¿œç¨‹åˆ†æ”¯å­˜åœ¨ â†’ è‡ªåŠ¨åˆ›å»ºæœ¬åœ°åˆ†æ”¯å¹¶è·Ÿè¸ªè¿œç¨‹
3. åˆ†æ”¯ä¸å­˜åœ¨ â†’ è‡ªåŠ¨åˆ›å»ºæ–°åˆ†æ”¯

**æ—¥å¿—å½’æ¡£ï¼š**
- åˆ‡æ¢æˆåŠŸåï¼Œè‡ªåŠ¨å½’æ¡£å½“å‰åˆ†æ”¯çš„å·¥ä½œæ—¥å¿—åˆ° `.claude/logs/archived/<æ—§åˆ†æ”¯å>/`

**æ—§åˆ†æ”¯æ¸…ç†ï¼š**
- å¦‚æœæ—§åˆ†æ”¯å·²åˆå¹¶åˆ°ä¸»åˆ†æ”¯ï¼Œæç¤ºç”¨æˆ·æ˜¯å¦åˆ é™¤

**tmux é›†æˆï¼š**
- åœ¨ tmux ä¸­ï¼Œè‡ªåŠ¨æ›´æ–° window åç§°ä¸ºæ–°åˆ†æ”¯å
- å¦‚æœä½¿ç”¨ iTerm2ï¼Œè‡ªåŠ¨æ›´æ–° tab title

### ç¤ºä¾‹

**åœ¨å½“å‰ worktree ä¸­åˆ‡æ¢åˆ†æ”¯ï¼š**

```bash
$ cd worktrees/task-1
$ colyn checkout feature/new-login
# æˆ–ä½¿ç”¨åˆ«å
$ colyn co feature/new-login
```

**æŒ‡å®š worktree ID åˆ‡æ¢åˆ†æ”¯ï¼š**

```bash
$ colyn checkout 1 feature/new-login
$ colyn co 1 feature/new-login
```

**è·³è¿‡è¿œç¨‹è·å–ï¼š**

```bash
$ colyn checkout feature/test --no-fetch
```

### æ‰§è¡Œç»“æœï¼ˆæ—§åˆ†æ”¯å·²åˆå¹¶ï¼‰

```
âœ“ å·²åˆ‡æ¢åˆ°åˆ†æ”¯ feature/new-login

âœ“ åˆ†æ”¯ feature/old å·²åˆå¹¶åˆ°ä¸»åˆ†æ”¯
? æ˜¯å¦åˆ é™¤æ—§åˆ†æ”¯ feature/oldï¼Ÿ (Y/n) y
âœ“ å·²åˆ é™¤åˆ†æ”¯ feature/old

æ—¥å¿—å·²å½’æ¡£åˆ°: .claude/logs/archived/feature-old/

ğŸ“‚ å·²åˆ‡æ¢åˆ°: /path/to/worktrees/task-1
```

### å¸¸è§é”™è¯¯

| é”™è¯¯åœºæ™¯ | é”™è¯¯ä¿¡æ¯ | è§£å†³æ–¹æ³• |
|---------|---------|---------|
| æœ‰æœªæäº¤æ›´æ”¹ | `âœ— worktree ä¸­æœ‰æœªæäº¤çš„æ›´æ”¹` | æäº¤æ›´æ”¹æˆ–ä½¿ç”¨ `git stash` |
| ç›®æ ‡åˆ†æ”¯å·²è¢«ä½¿ç”¨ | `âœ— åˆ†æ”¯å·²åœ¨å…¶ä»– worktree ä¸­ä½¿ç”¨` | åˆ‡æ¢åˆ°å¯¹åº” worktreeï¼Œæˆ–ä½¿ç”¨å…¶ä»–åˆ†æ”¯å |
| ç›®æ ‡æ˜¯ä¸»åˆ†æ”¯ | `âœ— ä¸èƒ½åœ¨ worktree ä¸­åˆ‡æ¢åˆ°ä¸»åˆ†æ”¯` | ç›´æ¥ä½¿ç”¨ä¸»åˆ†æ”¯ç›®å½• |

### æç¤º

- å¯ä»¥å¤ç”¨å·²æœ‰ worktree è¿›è¡Œä¸åŒåˆ†æ”¯çš„å¼€å‘
- åˆ‡æ¢å‰ä¼šè‡ªåŠ¨å½’æ¡£ `.claude/logs/` ç›®å½•ä¸‹çš„æ—¥å¿—æ–‡ä»¶
- fetch æˆåŠŸåä¼šè‡ªåŠ¨æ›´æ–°ä¸»åˆ†æ”¯ï¼ˆå¦‚æœä¸»åˆ†æ”¯è½åäºè¿œç¨‹ï¼‰
- å·²åˆå¹¶çš„æ—§åˆ†æ”¯å¯é€‰åˆ é™¤

---

## colyn info

æ˜¾ç¤ºå½“å‰ç›®å½•çš„é¡¹ç›®ä¿¡æ¯ã€‚

### è¯­æ³•

```bash
colyn info [é€‰é¡¹]
```

### é€‰é¡¹

| é€‰é¡¹ | çŸ­é€‰é¡¹ | è¯´æ˜ |
|------|--------|------|
| `--short` | `-S` | è¾“å‡ºç®€çŸ­æ ‡è¯†ç¬¦ï¼ˆå¸¦åˆ†æ”¯ä¿¡æ¯ï¼‰ï¼Œæ”¯æŒé™çº§ |
| `--field=<name>` | `-f <name>` | è¾“å‡ºæŒ‡å®šå­—æ®µï¼ˆå¯å¤šæ¬¡ä½¿ç”¨ï¼‰ |
| `--format=<template>` | - | ä½¿ç”¨æ¨¡æ¿å­—ç¬¦ä¸²æ ¼å¼åŒ–è¾“å‡º |
| `--separator=<char>` | `-s <char>` | å¤šå­—æ®µæ—¶çš„åˆ†éš”ç¬¦ï¼ˆé»˜è®¤ tabï¼‰ |

### å¯ç”¨å­—æ®µ

| å­—æ®µå | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|--------|
| `project` | ä¸»ç›®å½•åç§° | `myapp` |
| `project-path` | ä¸»ç›®å½•å®Œæ•´è·¯å¾„ | `/Users/me/work/myapp/myapp` |
| `worktree-id` | Worktree IDï¼ˆä¸»åˆ†æ”¯ä¸º 0ï¼‰ | `1` |
| `worktree-dir` | Worktree ç›®å½•å | `task-1` |
| `worktree-path` | Worktree ç›®å½•å®Œæ•´è·¯å¾„ | `/Users/me/work/myapp/worktrees/task-1` |
| `branch` | å½“å‰åˆ†æ”¯åç§° | `feature/login` |
| `status` | å·¥ä½œæµçŠ¶æ€ï¼ˆ`idle`/`running`/`waiting-confirm`/`finish`ï¼‰ | `running` |
| `last-updated-at` | çŠ¶æ€æœ€åæ›´æ–°æ—¶é—´ï¼ˆISO 8601ï¼Œæœªè®¾ç½®æ—¶ä¸ºç©ºå­—ç¬¦ä¸²ï¼‰ | `2026-02-22T10:00:00.000Z` |

### åŠŸèƒ½è¯´æ˜

`colyn info` æ”¯æŒå¤šç§è¾“å‡ºæ ¼å¼ï¼Œé€‚åº”ä¸åŒä½¿ç”¨åœºæ™¯ï¼š

#### 1. ç®€çŸ­æ ‡è¯†ç¬¦ï¼ˆ`--short`ï¼‰
- è¾“å‡ºæ ¼å¼ï¼š`{project}/{worktree-dir} (â‡ {branch})`
- æ”¯æŒæ™ºèƒ½é™çº§ï¼šColyn é¡¹ç›® â†’ Git ä»“åº“ â†’ æ™®é€šç›®å½•
- æ¨èç”¨äº shell æç¤ºç¬¦

#### 2. å®Œæ•´ä¿¡æ¯ï¼ˆé»˜è®¤ï¼‰
- æ˜¾ç¤ºæ‰€æœ‰å­—æ®µï¼Œå¸¦é¢œè‰²å’Œå›¾æ ‡
- ä¾¿äºäººå·¥æŸ¥çœ‹

#### 3. å­—æ®µè¾“å‡ºï¼ˆ`--field`ï¼‰
- è¾“å‡ºçº¯æ–‡æœ¬ï¼Œé€‚åˆè„šæœ¬ä½¿ç”¨
- å¯æŒ‡å®šå¤šä¸ªå­—æ®µ

#### 4. æ¨¡æ¿æ ¼å¼ï¼ˆ`--format`ï¼‰
- ä½¿ç”¨ `{field-name}` å ä½ç¬¦
- çµæ´»çš„è‡ªå®šä¹‰æ ¼å¼

### ç¤ºä¾‹

**æ˜¾ç¤ºå®Œæ•´ä¿¡æ¯ï¼ˆé»˜è®¤ï¼‰ï¼š**

```bash
$ colyn info
ğŸ“ Project:       myapp
ğŸ“‚ Project Path:  /Users/me/work/myapp/myapp
ğŸ”¢ Worktree ID:   1
ğŸ“ Worktree Dir:  task-1
ğŸ“‚ Worktree Path: /Users/me/work/myapp/worktrees/task-1
ğŸŒ¿ Branch:        feature/login
âš¡ Status:        running
ğŸ“… Last Updated:  2026-02-22 18:00:04
```

**è¾“å‡ºç®€çŸ­æ ‡è¯†ç¬¦ï¼ˆæ¨èç”¨äº shell æç¤ºç¬¦ï¼‰ï¼š**

```bash
# åœ¨ colyn é¡¹ç›®ä¸­
$ colyn info --short
myapp/task-1 (â‡ feature/login)

# åœ¨ git ä»“åº“ä¸­ï¼ˆæœªåˆå§‹åŒ– colynï¼‰
$ colyn info --short
my-repo (â‡ main)

# åœ¨é git ç›®å½•ä¸­
$ colyn info --short
my-folder
```

**åœ¨ shell æç¤ºç¬¦ä¸­ä½¿ç”¨ï¼š**

```bash
# æ·»åŠ åˆ° .zshrc æˆ– .bashrc
PS1='[$(colyn info -S)] $ '

# æ•ˆæœ
[myapp/task-1 (â‡ feature/login)] $
```

**è·å–å•ä¸ªå­—æ®µï¼š**

```bash
$ colyn info -f branch
feature/login

$ colyn info -f status
running
```

**è·å–å¤šä¸ªå­—æ®µï¼š**

```bash
# é»˜è®¤ç”¨ tab åˆ†éš”
$ colyn info -f project -f branch
myapp	feature/login

# è‡ªå®šä¹‰åˆ†éš”ç¬¦
$ colyn info -f project -f branch -s "/"
myapp/feature/login
```

**æ¨¡æ¿å­—ç¬¦ä¸²æ ¼å¼åŒ–ï¼š**

```bash
$ colyn info --format="{project}/{worktree-dir}"
myapp/task-1

$ colyn info --format="[{status}] {project}/{worktree-dir}"
[running] myapp/task-1
```

### ä½ç½®è¦æ±‚

**ä½¿ç”¨ `--short` é€‰é¡¹ï¼š**
- æ”¯æŒåœ¨ä»»ä½•ä½ç½®è¿è¡Œï¼Œä¼šè‡ªåŠ¨é™çº§

**ä½¿ç”¨å…¶ä»–é€‰é¡¹ï¼š**
- å¿…é¡»åœ¨ä¸»åˆ†æ”¯ç›®å½•æˆ– worktree ç›®å½•ä¸­æ‰§è¡Œ
- åœ¨å…¶ä»–ä½ç½®æ‰§è¡Œä¼šæŠ¥é”™

### å¸¸è§é”™è¯¯

| é”™è¯¯åœºæ™¯ | é”™è¯¯ä¿¡æ¯ | è§£å†³æ–¹æ³• |
|---------|---------|---------|
| ä¸åœ¨å·¥ä½œç›®å½• | `âœ— å½“å‰ç›®å½•ä¸åœ¨ worktree æˆ–ä¸»åˆ†æ”¯ä¸­` | åˆ‡æ¢åˆ°ä¸»åˆ†æ”¯ç›®å½•æˆ– worktree ç›®å½• |
| æ— æ•ˆå­—æ®µå | `âœ— æ— æ•ˆçš„å­—æ®µå` | ä½¿ç”¨æ­£ç¡®çš„å­—æ®µå |

### æç¤º

- `--short` é€‰é¡¹æ”¯æŒæ™ºèƒ½é™çº§ï¼Œå¯åœ¨ä»»ä½•ç›®å½•ä½¿ç”¨
- é€‚åˆé›†æˆåˆ° shell æç¤ºç¬¦ã€ç»ˆç«¯æ ‡é¢˜æˆ–æ—¥å¿—å‰ç¼€
- `status` å’Œ `last-updated-at` å­—æ®µå¯ä¸ `colyn status set` è”åŠ¨ï¼Œè¿½è¸ªå·¥ä½œæµè¿›åº¦

---

## colyn status

æŸ¥è¯¢æˆ–è®¾ç½®å½“å‰ Worktree çš„å·¥ä½œæµçŠ¶æ€ã€‚

### è¯­æ³•

```bash
colyn status [get] [--json]
colyn status set <status>
```

- `get` ä¸ºå¯é€‰å­å‘½ä»¤ï¼Œ`colyn status` ä¸ `colyn status get` ç­‰ä»·
- åˆ«åï¼š`st`

### å­å‘½ä»¤

#### `colyn status get`ï¼ˆé»˜è®¤ï¼‰

è·å–å½“å‰ Worktree çš„å·¥ä½œæµçŠ¶æ€ã€‚

| é€‰é¡¹ | è¯´æ˜ |
|------|------|
| `--json` | ä»¥ JSON æ ¼å¼è¾“å‡º |

#### `colyn status set <status>`

è®¾ç½®å½“å‰ Worktree çš„å·¥ä½œæµçŠ¶æ€ã€‚

| å‚æ•° | è¯´æ˜ |
|------|------|
| `<status>` | çŠ¶æ€å€¼ï¼š`idle` \| `running` \| `waiting-confirm` \| `finish` |

### çŠ¶æ€å€¼è¯´æ˜

| çŠ¶æ€å€¼ | å«ä¹‰ |
|--------|------|
| `idle` | ç©ºé—²ï¼Œæ²¡æœ‰æ­£åœ¨è¿›è¡Œçš„ä»»åŠ¡ |
| `running` | è¿è¡Œä¸­ï¼ŒClaude æ­£åœ¨å¤„ç†ä»»åŠ¡ |
| `waiting-confirm` | ç­‰å¾…ç”¨æˆ·ç¡®è®¤ |
| `finish` | å·²å®Œæˆï¼Œç­‰å¾…åˆå¹¶ |

### ç¤ºä¾‹

**æŸ¥è¯¢çŠ¶æ€ï¼ˆäººç±»å¯è¯»ï¼‰ï¼š**

```bash
$ colyn status
Status:   running
Updated:  2026-02-22 18:00:04
```

**ä»æœªè®¾ç½®æ—¶ï¼š**

```bash
$ colyn status
Status:   idle
Updated:  ï¼ˆä»æœªè®¾ç½®ï¼‰
```

**JSON æ ¼å¼è¾“å‡ºï¼š**

```bash
$ colyn status --json
{"worktreeDir":"task-1","worktreeId":1,"status":"running","updatedAt":"2026-02-22T10:00:04.000Z"}

$ colyn status get --json
{"worktreeDir":"task-1","worktreeId":1,"status":"running","updatedAt":"2026-02-22T10:00:04.000Z"}
```

**è®¾ç½®çŠ¶æ€ï¼š**

```bash
$ colyn status set running
âœ“ çŠ¶æ€å·²æ›´æ–°: running

$ colyn status set finish
âœ“ çŠ¶æ€å·²æ›´æ–°: finish

$ colyn status set invalid
âœ— æ— æ•ˆçš„çŠ¶æ€å€¼: invalid
  æœ‰æ•ˆçŠ¶æ€: idle, running, waiting-confirm, finish
```

### è‡ªåŠ¨é‡ç½®

ä»¥ä¸‹å‘½ä»¤æˆåŠŸæ‰§è¡Œåï¼Œå¯¹åº” Worktree çŠ¶æ€ä¼šè‡ªåŠ¨é‡ç½®ä¸º `idle`ï¼š

- `colyn add`ï¼šåˆ›å»ºæ–° Worktree å
- `colyn checkout`ï¼šåˆ‡æ¢åˆ†æ”¯å
- `colyn merge`ï¼šåˆå¹¶åˆ°ä¸»åˆ†æ”¯å

### çŠ¶æ€æ–‡ä»¶

çŠ¶æ€æŒä¹…åŒ–åˆ°ä»¥ä¸‹ä¸¤ä¸ªæ–‡ä»¶ï¼š

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `{projectRoot}/.colyn/status.json` | é¡¹ç›®çº§çŠ¶æ€ï¼ˆå„ Worktree çš„çŠ¶æ€ï¼‰ |
| `~/.colyn-status.json` | å…¨å±€ç´¢å¼•ï¼ˆè®°å½•æœ‰æ´»è·ƒçŠ¶æ€çš„é¡¹ç›®è·¯å¾„ï¼‰ |

### ä¸ colyn info çš„å…³ç³»

`colyn info` è¯»å–çŠ¶æ€æ–‡ä»¶ï¼Œæä¾› `status` å’Œ `last-updated-at` å­—æ®µï¼š

```bash
$ colyn info -f status
running

$ colyn info --format="[{status}] {project}/{worktree-dir}"
[running] myapp/task-1
```

### å¸¸è§é”™è¯¯

| é”™è¯¯åœºæ™¯ | é”™è¯¯ä¿¡æ¯ | è§£å†³æ–¹æ³• |
|---------|---------|---------|
| ä¸åœ¨ colyn é¡¹ç›®ä¸­ | `âœ— å½“å‰ç›®å½•ä¸æ˜¯ colyn é¡¹ç›®` | åˆ‡æ¢åˆ° colyn é¡¹ç›®ç›®å½• |
| æ— æ•ˆçŠ¶æ€å€¼ | `âœ— æ— æ•ˆçš„çŠ¶æ€å€¼: xxx` | ä½¿ç”¨æœ‰æ•ˆçŠ¶æ€å€¼ |
