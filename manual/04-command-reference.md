# å‘½ä»¤å‚è€ƒæ‰‹å†Œ

æœ¬ç« èŠ‚æä¾› Colyn æ‰€æœ‰å‘½ä»¤çš„è¯¦ç»†å‚è€ƒæ–‡æ¡£ã€‚

---

## ç›®å½•

- [å…¨å±€é€‰é¡¹](#å…¨å±€é€‰é¡¹)
- [colyn init](#colyn-init)
- [colyn add](#colyn-add)
- [colyn list](#colyn-list)
- [colyn merge](#colyn-merge)
- [colyn remove](#colyn-remove)
- [colyn checkout](#colyn-checkout)
- [colyn info](#colyn-info)
- [colyn repair](#colyn-repair)
- [colyn completion](#colyn-completion)
- [colyn system-integration](#colyn-system-integration)
- [colyn release](#colyn-release)

---

## å…¨å±€é€‰é¡¹

æ‰€æœ‰ Colyn å‘½ä»¤éƒ½æ”¯æŒä»¥ä¸‹å…¨å±€é€‰é¡¹ï¼š

### `-C, --no-color`

ç¦ç”¨å½©è‰²è¾“å‡ºã€‚

**é€‚ç”¨åœºæ™¯ï¼š**
- åœ¨ CI/CD ç¯å¢ƒä¸­è¿è¡Œ
- å°†è¾“å‡ºé‡å®šå‘åˆ°æ–‡ä»¶
- ç»ˆç«¯ä¸æ”¯æŒé¢œè‰²æ˜¾ç¤º
- éœ€è¦çº¯æ–‡æœ¬è¾“å‡ºç”¨äºè„šæœ¬è§£æ

**ç¤ºä¾‹ï¼š**
```bash
colyn list --no-color           # åˆ—å‡º worktreeï¼ˆæ— é¢œè‰²ï¼‰
colyn info --short -C           # æ˜¾ç¤ºé¡¹ç›®ä¿¡æ¯ï¼ˆæ— é¢œè‰²ï¼‰
colyn checkout feature/test -C  # åˆ‡æ¢åˆ†æ”¯ï¼ˆæ— é¢œè‰²ï¼‰
```

---

## colyn init

åˆå§‹åŒ– Worktree ç®¡ç†ç»“æ„ã€‚

### è¯­æ³•

```bash
colyn init [é€‰é¡¹]
```

### é€‰é¡¹

| é€‰é¡¹ | çŸ­é€‰é¡¹ | è¯´æ˜ | é»˜è®¤å€¼ |
|------|--------|------|--------|
| `--port <port>` | `-p` | ä¸»åˆ†æ”¯å¼€å‘æœåŠ¡å™¨ç«¯å£å· | 10000 |

### åŠŸèƒ½è¯´æ˜

`colyn init` ä¼šæ ¹æ®å½“å‰ç›®å½•çš„çŠ¶æ€é‡‡å–ä¸åŒçš„åˆå§‹åŒ–ç­–ç•¥ï¼š

#### 1. ç©ºç›®å½•
- åˆ›å»ºä¸»åˆ†æ”¯ç›®å½•ã€worktrees ç›®å½•å’Œé…ç½®ç›®å½•
- é…ç½®ç¯å¢ƒå˜é‡æ–‡ä»¶
- æç¤ºç”¨æˆ·åœ¨ä¸»åˆ†æ”¯ç›®å½•ä¸­åˆå§‹åŒ–é¡¹ç›®

#### 2. å·²æœ‰é¡¹ç›®
- æ˜¾ç¤ºå½“å‰æ–‡ä»¶åˆ—è¡¨å¹¶è¯¢é—®ç”¨æˆ·ç¡®è®¤
- åˆ›å»ºç›®å½•ç»“æ„å¹¶ç§»åŠ¨æ‰€æœ‰æ–‡ä»¶åˆ°ä¸»åˆ†æ”¯ç›®å½•
- å¦‚æœæ˜¯ git ä»“åº“ï¼Œæ£€æŸ¥å·¥ä½œç›®å½•å¿…é¡»å¹²å‡€
- é…ç½®ç¯å¢ƒå˜é‡å’Œ .gitignore

#### 3. å·²åˆå§‹åŒ–é¡¹ç›®ï¼ˆè¡¥å…¨æ¨¡å¼ï¼‰
- æ£€æµ‹ç¼ºå¤±çš„éƒ¨åˆ†å¹¶è¡¥å…¨
- ä¸ä¼šè¦†ç›–å·²æœ‰é…ç½®
- ç¯å¢ƒå˜é‡æ™ºèƒ½åˆå¹¶

### ç¤ºä¾‹

```bash
# äº¤äº’å¼è¯¢é—®ç«¯å£
$ colyn init
? è¯·è¾“å…¥ä¸»åˆ†æ”¯å¼€å‘æœåŠ¡å™¨ç«¯å£: (10000)

# ç›´æ¥æŒ‡å®šç«¯å£
$ colyn init --port 10000
$ colyn init -p 3000
```

### æ‰§è¡Œç»“æœ

åˆå§‹åŒ–åçš„ç›®å½•ç»“æ„ï¼š

```
my-project/                 # é¡¹ç›®æ ¹ç›®å½•
â”œâ”€â”€ my-project/             # ä¸»åˆ†æ”¯ç›®å½•
â”‚   â”œâ”€â”€ .git/              # Git ä»“åº“ï¼ˆå¦‚æœæ˜¯ git é¡¹ç›®ï¼‰
â”‚   â”œâ”€â”€ src/               # æºä»£ç 
â”‚   â”œâ”€â”€ .env.local         # PORT=10000, WORKTREE=main
â”‚   â”œâ”€â”€ .gitignore         # åŒ…å« .env.local å¿½ç•¥è§„åˆ™
â”‚   â””â”€â”€ ...                # å…¶ä»–é¡¹ç›®æ–‡ä»¶
â”œâ”€â”€ worktrees/             # Worktree ç›®å½•ï¼ˆåˆå§‹ä¸ºç©ºï¼‰
â””â”€â”€ .colyn/                # Colyn é…ç½®ç›®å½•
```

### å¸¸è§é”™è¯¯

| é”™è¯¯åœºæ™¯ | é”™è¯¯ä¿¡æ¯ | è§£å†³æ–¹æ³• |
|---------|---------|---------|
| å·¥ä½œç›®å½•ä¸å¹²å‡€ | `âœ— å·¥ä½œç›®å½•ä¸å¹²å‡€ï¼Œå­˜åœ¨æœªæäº¤çš„æ›´æ”¹` | è¿è¡Œ `git add .` å’Œ `git commit`ï¼Œæˆ– `git stash` |
| ç›®å½•åå†²çª | `âœ— ä¸»åˆ†æ”¯ç›®å½•åä¸ç°æœ‰æ–‡ä»¶å†²çª` | é‡å‘½åæˆ–åˆ é™¤ä¸ä¸»åˆ†æ”¯ç›®å½•åŒåçš„æ–‡ä»¶ |
| æ— æ•ˆç«¯å£å· | `âœ— æ— æ•ˆçš„ç«¯å£å·` | è¾“å…¥ 1-65535 ä¹‹é—´çš„ç«¯å£å· |

### æç¤º

- åˆå§‹åŒ–æ˜¯æ‰€æœ‰å…¶ä»– Colyn å‘½ä»¤çš„å‰ç½®æ¡ä»¶
- ç«¯å£å·å¯ä»¥åœ¨ä¸»åˆ†æ”¯ç›®å½•çš„ `.env.local` ä¸­éšæ—¶ä¿®æ”¹
- è¡¥å…¨æ¨¡å¼åªæ·»åŠ ç¼ºå¤±éƒ¨åˆ†ï¼Œä¸ä¼šè¦†ç›–å·²æœ‰é…ç½®

---

## colyn add

ä¸ºæŒ‡å®šåˆ†æ”¯åˆ›å»ºæ–°çš„ Worktreeã€‚

### è¯­æ³•

```bash
colyn add <branch>
```

### å‚æ•°

| å‚æ•° | å¿…å¡« | è¯´æ˜ |
|------|------|------|
| `branch` | æ˜¯ | åˆ†æ”¯åç§°ï¼ˆæ”¯æŒæœ¬åœ°åˆ†æ”¯ã€è¿œç¨‹åˆ†æ”¯æˆ–æ–°å»ºåˆ†æ”¯ï¼‰ |

### åŠŸèƒ½è¯´æ˜

`colyn add` ä¼šæ™ºèƒ½å¤„ç†åˆ†æ”¯ï¼š

1. **æœ¬åœ°åˆ†æ”¯å­˜åœ¨** - ç›´æ¥ä½¿ç”¨æœ¬åœ°åˆ†æ”¯åˆ›å»º Worktree
2. **è¿œç¨‹åˆ†æ”¯å­˜åœ¨** - è‡ªåŠ¨åˆ›å»ºæœ¬åœ°è·Ÿè¸ªåˆ†æ”¯
3. **åˆ†æ”¯ä¸å­˜åœ¨** - åŸºäºä¸»åˆ†æ”¯åˆ›å»ºæ–°åˆ†æ”¯

åˆ›å»ºçš„ Worktree ä¼šï¼š
- è‡ªåŠ¨åˆ†é… IDï¼ˆé€’å¢ï¼‰
- è‡ªåŠ¨åˆ†é…ç«¯å£å·ï¼ˆä¸»ç«¯å£ + IDï¼‰
- å¤åˆ¶ä¸»åˆ†æ”¯ç¯å¢ƒå˜é‡å¹¶æ›´æ–° PORT å’Œ WORKTREE
- æ‰§è¡Œåè‡ªåŠ¨åˆ‡æ¢åˆ° Worktree ç›®å½•

### ç¤ºä¾‹

```bash
# åˆ›å»ºæ–°åˆ†æ”¯çš„ worktree
$ colyn add feature/login

# åŸºäºå·²æœ‰æœ¬åœ°åˆ†æ”¯åˆ›å»º worktree
$ colyn add bugfix/auth-error

# ä»è¿œç¨‹åˆ†æ”¯åˆ›å»º worktreeï¼ˆè‡ªåŠ¨å»é™¤ origin/ å‰ç¼€ï¼‰
$ colyn add origin/feature/payment

# æ‰§è¡Œåè‡ªåŠ¨åˆ‡æ¢åˆ° worktree ç›®å½•
$ pwd
/path/to/worktrees/task-1
```

### æ‰§è¡Œç»“æœ

```
âœ” ä½¿ç”¨æœ¬åœ°åˆ†æ”¯: feature/login
âœ” Worktree åˆ›å»ºå®Œæˆ: task-1
âœ” ç¯å¢ƒå˜é‡é…ç½®å®Œæˆ
âœ” é…ç½®æ–‡ä»¶æ›´æ–°å®Œæˆ

âœ“ Worktree åˆ›å»ºæˆåŠŸï¼

Worktree ä¿¡æ¯ï¼š
  ID: 1
  åˆ†æ”¯: feature/login
  è·¯å¾„: /path/to/worktrees/task-1
  ç«¯å£: 10001

åç»­æ“ä½œï¼š
  1. å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼ˆç«¯å£å·²è‡ªåŠ¨é…ç½®ï¼‰ï¼š
     npm run dev

  2. æŸ¥çœ‹æ‰€æœ‰ worktreeï¼š
     colyn list

ğŸ“‚ å·²åˆ‡æ¢åˆ°: /path/to/worktrees/task-1
```

åˆ›å»ºåçš„ç›®å½•ç»“æ„ï¼š

```
my-project/
â”œâ”€â”€ my-project/                # ä¸»åˆ†æ”¯ç›®å½• (PORT=10000)
â””â”€â”€ worktrees/
    â””â”€â”€ task-1/                # æ–°çš„ worktree (PORT=10001)
        â”œâ”€â”€ src/
        â”œâ”€â”€ .env.local         # PORT=10001, WORKTREE=1
        â””â”€â”€ ...
```

### å¸¸è§é”™è¯¯

| é”™è¯¯åœºæ™¯ | é”™è¯¯ä¿¡æ¯ | è§£å†³æ–¹æ³• |
|---------|---------|---------|
| æœªåˆå§‹åŒ– | `âœ— å½“å‰ç›®å½•æœªåˆå§‹åŒ–` | è¿è¡Œ `colyn init` |
| åˆ†æ”¯å·²æœ‰ worktree | `âœ— åˆ†æ”¯å·²å…³è”åˆ°ç°æœ‰ worktree` | åˆ‡æ¢åˆ°å·²æœ‰ worktreeï¼Œæˆ–åˆ é™¤åé‡å»º |
| åˆ†æ”¯åç§°æ— æ•ˆ | `âœ— æ— æ•ˆçš„åˆ†æ”¯åç§°` | ä½¿ç”¨æœ‰æ•ˆçš„åˆ†æ”¯åç§°ï¼ˆå­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿ã€è¿å­—ç¬¦å’Œæ–œæ ï¼‰ |

### æç¤º

- ID ä¸ä¼šé‡ç”¨ï¼Œå³ä½¿åˆ é™¤äº†æŸä¸ª worktree
- å¯ä»¥åœ¨é¡¹ç›®çš„ä»»æ„ä½ç½®è¿è¡Œæ­¤å‘½ä»¤
- åˆ†æ”¯åä¼šè‡ªåŠ¨å»é™¤ `origin/` å‰ç¼€
- å‘½ä»¤æ‰§è¡Œåä¼šè‡ªåŠ¨åˆ‡æ¢åˆ°æ–°åˆ›å»ºçš„ worktree ç›®å½•

---

## colyn list

åˆ—å‡ºæ‰€æœ‰ Worktreeã€‚

### è¯­æ³•

```bash
colyn list [é€‰é¡¹]
```

### é€‰é¡¹

| é€‰é¡¹ | çŸ­é€‰é¡¹ | è¯´æ˜ | é»˜è®¤å€¼ |
|------|--------|------|--------|
| `--json` | - | ä»¥ JSON æ ¼å¼è¾“å‡º | å¦ |
| `--paths` | `-p` | åªè¾“å‡ºè·¯å¾„ï¼ˆæ¯è¡Œä¸€ä¸ªï¼‰ | å¦ |
| `--no-main` | - | ä¸æ˜¾ç¤ºä¸»åˆ†æ”¯ | å¦ï¼ˆæ˜¾ç¤ºä¸»åˆ†æ”¯ï¼‰ |

### åŠŸèƒ½è¯´æ˜

`colyn list` æä¾›ä¸‰ç§è¾“å‡ºæ ¼å¼ï¼š

#### 1. è¡¨æ ¼æ ¼å¼ï¼ˆé»˜è®¤ï¼‰
- å½©è‰²è¾“å‡ºï¼Œç¾è§‚æ˜“è¯»
- å½“å‰æ‰€åœ¨ worktree ç”¨ `â†’` ç®­å¤´æ ‡è¯†
- ä¸»åˆ†æ”¯ ID æ˜¾ç¤ºä¸º `-`
- æ˜¾ç¤º git çŠ¶æ€å’Œä¸ä¸»åˆ†æ”¯çš„å·®å¼‚
- å“åº”å¼å¸ƒå±€ï¼šæ ¹æ®ç»ˆç«¯å®½åº¦è‡ªåŠ¨è°ƒæ•´æ˜¾ç¤ºåˆ—

#### 2. JSON æ ¼å¼ï¼ˆ`--json`ï¼‰
- æœºå™¨å¯è¯»ï¼Œä¾¿äºè„šæœ¬å¤„ç†
- åŒ…å«å®Œæ•´ä¿¡æ¯
- æ•°ç»„æ ¼å¼

#### 3. è·¯å¾„æ ¼å¼ï¼ˆ`--paths`ï¼‰
- æ¯è¡Œä¸€ä¸ªè·¯å¾„ï¼ˆç›¸å¯¹è·¯å¾„ï¼‰
- ä¾¿äºç®¡é“æ“ä½œ

### ç¤ºä¾‹

**è¡¨æ ¼æ ¼å¼ï¼ˆé»˜è®¤ï¼‰ï¼š**

```bash
$ colyn list

ID    Branch            Port   Status      Diff   Path
  -   main              10000              -      my-app
  1   feature/login     10001  M:3         â†‘2 â†“1  worktrees/task-1
â†’ 2   feature/dashboard 10002              â†‘5     worktrees/task-2
```

**è¯´æ˜ï¼š**
- `â†’` ç®­å¤´æ ‡è¯†å½“å‰æ‰€åœ¨çš„ worktreeï¼Œæ•´è¡Œé’è‰²é«˜äº®
- `Status`: æœªæäº¤ä¿®æ”¹ç»Ÿè®¡ï¼ˆM:å·²ä¿®æ”¹ S:å·²æš‚å­˜ ?:æœªè·Ÿè¸ªï¼‰
- `Diff`: ä¸ä¸»åˆ†æ”¯çš„æäº¤å·®å¼‚ï¼ˆâ†‘é¢†å…ˆ â†“è½å âœ“å·²åŒæ­¥ï¼‰

**JSON æ ¼å¼ï¼š**

```bash
$ colyn list --json
```

```json
[
  {
    "id": null,
    "branch": "main",
    "port": 10000,
    "path": "my-app",
    "isMain": true,
    "isCurrent": false,
    "status": { "modified": 0, "staged": 0, "untracked": 0 },
    "diff": { "ahead": 0, "behind": 0 }
  },
  {
    "id": 1,
    "branch": "feature/login",
    "port": 10001,
    "path": "worktrees/task-1",
    "isMain": false,
    "isCurrent": false,
    "status": { "modified": 3, "staged": 1, "untracked": 2 },
    "diff": { "ahead": 2, "behind": 1 }
  }
]
```

**è·¯å¾„æ ¼å¼ï¼š**

```bash
$ colyn list --paths
my-app
worktrees/task-1
worktrees/task-2

# åªè¾“å‡ºä»»åŠ¡ worktree è·¯å¾„
$ colyn list --paths --no-main
worktrees/task-1
worktrees/task-2
```

### è„šæœ¬ä½¿ç”¨ç¤ºä¾‹

```bash
# åœ¨æ‰€æœ‰ worktree ä¸­æ‰§è¡Œå‘½ä»¤
$ colyn list --paths | xargs -I {} sh -c 'cd {} && git status'

# ç»Ÿè®¡ worktree æ•°é‡
$ colyn list --paths --no-main | wc -l

# ä½¿ç”¨ jq å¤„ç† JSON è¾“å‡º
$ colyn list --json | jq '.[] | select(.isMain == false) | .path'
```

### å¸¸è§é”™è¯¯

| é”™è¯¯åœºæ™¯ | é”™è¯¯ä¿¡æ¯ | è§£å†³æ–¹æ³• |
|---------|---------|---------|
| é¡¹ç›®æœªåˆå§‹åŒ– | `âœ— å½“å‰ç›®å½•æœªåˆå§‹åŒ–` | è¿è¡Œ `colyn init` |
| é€‰é¡¹å†²çª | `âœ— --json å’Œ --paths ä¸èƒ½åŒæ—¶ä½¿ç”¨` | é€‰æ‹©å…¶ä¸­ä¸€ç§è¾“å‡ºæ ¼å¼ |

### æç¤º

- å¯ä»¥åœ¨é¡¹ç›®çš„ä»»æ„ä½ç½®è¿è¡Œ
- è·¯å¾„è¾“å‡ºä¸ºç›¸å¯¹äºé¡¹ç›®æ ¹ç›®å½•çš„ç›¸å¯¹è·¯å¾„
- ä¸»åˆ†æ”¯çš„ ID æ˜¾ç¤ºä¸º `-`
- ç»ˆç«¯çª„æ—¶è¡¨æ ¼ä¼šè‡ªåŠ¨éšè—ä¸é‡è¦çš„åˆ—

---

## colyn merge

å°† Worktree åˆ†æ”¯åˆå¹¶å›ä¸»åˆ†æ”¯ã€‚

### è¯­æ³•

```bash
colyn merge [target] [é€‰é¡¹]
```

### å‚æ•°

| å‚æ•° | å¿…å¡« | è¯´æ˜ |
|------|------|------|
| `target` | å¦ | æ”¯æŒä»¥ä¸‹å½¢å¼ï¼š<br>- æ•°å­—ï¼šæŒ‰ ID æŸ¥æ‰¾ï¼ˆå¦‚ `1`ï¼‰<br>- åˆ†æ”¯åï¼šæŒ‰åˆ†æ”¯åæŸ¥æ‰¾ï¼ˆå¦‚ `feature/login`ï¼‰<br>- ä¸ä¼ ï¼šè‡ªåŠ¨è¯†åˆ«å½“å‰ worktree |

### é€‰é¡¹

| é€‰é¡¹ | è¯´æ˜ |
|------|------|
| `--push` | åˆå¹¶åè‡ªåŠ¨æ¨é€åˆ°è¿œç¨‹ |

### åŠŸèƒ½è¯´æ˜

`colyn merge` é‡‡ç”¨ä¸¤æ­¥åˆå¹¶ç­–ç•¥ï¼Œä½¿ç”¨ `--no-ff` ä¿æŒæ¸…æ™°çš„åˆ†æ”¯å†å²ï¼š

**æ­¥éª¤ 1ï¼šåœ¨ Worktree ä¸­æ›´æ–°ä¸»åˆ†æ”¯ä»£ç **
- åœ¨ worktree ä¸­æ‰§è¡Œ `git rebase main`
- å¦‚æœæœ‰å†²çªï¼Œåœ¨ worktree ä¸­è§£å†³ï¼ˆä¸å½±å“ä¸»åˆ†æ”¯ï¼‰

**æ­¥éª¤ 2ï¼šåœ¨ä¸»åˆ†æ”¯ä¸­åˆå¹¶ Worktree åˆ†æ”¯**
- åœ¨ä¸»åˆ†æ”¯ä¸­æ‰§è¡Œ `git merge --no-ff <branch>`
- å¼ºåˆ¶åˆ›å»ºåˆå¹¶æäº¤ï¼Œä¿æŒæ¸…æ™°çš„åˆ†æ”¯å†å²

**å‰ç½®æ£€æŸ¥ï¼š**
- ä¸»åˆ†æ”¯å·¥ä½œç›®å½•å¿…é¡»å¹²å‡€
- Worktree å·¥ä½œç›®å½•å¿…é¡»å¹²å‡€

**åˆå¹¶åï¼š**
- è¯¢é—®æ˜¯å¦æ¨é€åˆ°è¿œç¨‹ä»“åº“
- ä¿ç•™ worktreeï¼ˆç”±ç”¨æˆ·å†³å®šåˆ é™¤æ—¶æœºï¼‰

### ç¤ºä¾‹

**åŸºæœ¬åˆå¹¶ï¼š**

```bash
# åœ¨ worktree ç›®å½•ä¸­åˆå¹¶
$ cd worktrees/task-1
$ colyn merge

# é€šè¿‡ ID åˆå¹¶
$ colyn merge 1

# é€šè¿‡åˆ†æ”¯ååˆå¹¶
$ colyn merge feature/login
```

**è‡ªåŠ¨æ¨é€ï¼š**

```bash
$ colyn merge 1 --push
```

### æ‰§è¡Œç»“æœ

```
æ£€æµ‹åˆ° worktree:
  ID: 1
  åˆ†æ”¯: feature/login
  è·¯å¾„: /path/to/worktrees/task-1

âœ“ å‰ç½®æ£€æŸ¥é€šè¿‡
âœ“ ä¸»åˆ†æ”¯å·¥ä½œç›®å½•å¹²å‡€
âœ“ Worktree å·¥ä½œç›®å½•å¹²å‡€

æ­¥éª¤ 1/2: åœ¨ worktree ä¸­æ›´æ–°ä¸»åˆ†æ”¯ä»£ç 
  ç›®å½•: /path/to/worktrees/task-1
  æ‰§è¡Œ: git rebase main
âœ” ä¸»åˆ†æ”¯å·²å˜åŸºåˆ° worktree

æ­¥éª¤ 2/2: åœ¨ä¸»åˆ†æ”¯ä¸­åˆå¹¶ worktree åˆ†æ”¯
  ç›®å½•: /path/to/my-project
  æ‰§è¡Œ: git merge --no-ff feature/login
âœ” worktree å·²åˆå¹¶åˆ°ä¸»åˆ†æ”¯
âœ“ åˆå¹¶å®Œæˆï¼

åˆå¹¶ä¿¡æ¯ï¼š
  ä¸»åˆ†æ”¯: main
  åˆå¹¶åˆ†æ”¯: feature/login
  æäº¤: a1b2c3d Merge branch 'feature/login'

? æ˜¯å¦æ¨é€åˆ°è¿œç¨‹ä»“åº“ï¼Ÿ(y/N) â€º Yes

âœ“ åˆå¹¶å®Œæˆå¹¶å·²æ¨é€åˆ°è¿œç¨‹ï¼

åç»­æ“ä½œï¼š
  1. æŸ¥çœ‹åˆå¹¶åçš„ä»£ç ï¼š
     cd my-project

  2. å¦‚éœ€åˆ é™¤ worktreeï¼š
     colyn remove 1
```

### å¤„ç†åˆå¹¶å†²çª

å¦‚æœåœ¨ worktree ä¸­åˆå¹¶ä¸»åˆ†æ”¯æ—¶å‘ç”Ÿå†²çªï¼š

```
âœ— å˜åŸºä¸»åˆ†æ”¯æ—¶å‘ç”Ÿå†²çª

å†²çªæ–‡ä»¶ï¼š
  src/app.ts
  src/config.ts

è§£å†³æ­¥éª¤ï¼š
  1. è¿›å…¥ worktree ç›®å½•è§£å†³å†²çªï¼š
     cd worktrees/task-1
  2. ç¼–è¾‘å†²çªæ–‡ä»¶ï¼Œè§£å†³å†²çªæ ‡è®°
  3. æ·»åŠ å·²è§£å†³çš„æ–‡ä»¶ï¼š
     git add <file>
  4. ç»§ç»­å˜åŸºï¼š
     git rebase --continue
  5. å¦‚éœ€æ”¾å¼ƒå˜åŸºï¼š
     git rebase --abort
  6. é‡æ–°è¿è¡Œåˆå¹¶å‘½ä»¤ï¼š
     colyn merge feature/login
```

### å¸¸è§é”™è¯¯

| é”™è¯¯åœºæ™¯ | é”™è¯¯ä¿¡æ¯ | è§£å†³æ–¹æ³• |
|---------|---------|---------|
| æœªåˆå§‹åŒ– | `âœ— å½“å‰ç›®å½•æœªåˆå§‹åŒ–` | è¿è¡Œ `colyn init` |
| Worktree ä¸å­˜åœ¨ | `âœ— æ‰¾ä¸åˆ° worktree` | æ£€æŸ¥ ID æˆ–åˆ†æ”¯åï¼Œè¿è¡Œ `colyn list` æŸ¥çœ‹ |
| ä¸»åˆ†æ”¯ä¸å¹²å‡€ | `âœ— ä¸»åˆ†æ”¯ç›®å½•æœ‰æœªæäº¤çš„æ›´æ”¹` | æäº¤æˆ– stash ä¸»åˆ†æ”¯çš„æ›´æ”¹ |
| Worktree ä¸å¹²å‡€ | `âœ— Worktree ç›®å½•æœ‰æœªæäº¤çš„æ›´æ”¹` | æäº¤ worktree çš„æ›´æ”¹ |
| æ¨é€å¤±è´¥ | `âœ— æ¨é€åˆ°è¿œç¨‹ä»“åº“å¤±è´¥` | æœ¬åœ°åˆå¹¶å·²å®Œæˆï¼Œæ£€æŸ¥ç½‘ç»œåæ‰‹åŠ¨æ¨é€ |

### æç¤º

- åˆå¹¶åä¸ä¼šè‡ªåŠ¨åˆ é™¤ worktreeï¼Œç”±ç”¨æˆ·å†³å®šåˆ é™¤æ—¶æœº
- ä½¿ç”¨ `--no-ff` ä¿æŒæ¸…æ™°çš„åˆ†æ”¯å†å²ï¼Œä¾¿äºè¿½è¸ªåŠŸèƒ½å¼€å‘å‘¨æœŸ
- å†²çªåœ¨ worktree ä¸­è§£å†³ï¼Œä¸å½±å“ä¸»åˆ†æ”¯ç¨³å®šæ€§
- å¯ä»¥åœ¨é¡¹ç›®çš„ä»»æ„ä½ç½®è¿è¡Œ

---

## colyn remove

åˆ é™¤ä¸å†éœ€è¦çš„ Worktreeã€‚

### è¯­æ³•

```bash
colyn remove [target] [é€‰é¡¹]
```

### å‚æ•°

| å‚æ•° | å¿…å¡« | è¯´æ˜ |
|------|------|------|
| `target` | å¦ | æ”¯æŒä»¥ä¸‹å½¢å¼ï¼š<br>- æ•°å­—ï¼šæŒ‰ ID æŸ¥æ‰¾ï¼ˆå¦‚ `1`ï¼‰<br>- åˆ†æ”¯åï¼šæŒ‰åˆ†æ”¯åæŸ¥æ‰¾ï¼ˆå¦‚ `feature/login`ï¼‰<br>- ä¸ä¼ ï¼šè‡ªåŠ¨è¯†åˆ«å½“å‰ worktree |

### é€‰é¡¹

| é€‰é¡¹ | çŸ­é€‰é¡¹ | è¯´æ˜ |
|------|--------|------|
| `--force` | `-f` | å¼ºåˆ¶åˆ é™¤ï¼ˆå¿½ç•¥æœªæäº¤çš„æ›´æ”¹ï¼‰ |
| `--yes` | `-y` | è·³è¿‡ç¡®è®¤æç¤º |

### åŠŸèƒ½è¯´æ˜

`colyn remove` å®‰å…¨åœ°åˆ é™¤ worktreeï¼š

**å‰ç½®æ£€æŸ¥ï¼š**
- æ£€æŸ¥æœªæäº¤æ›´æ”¹ï¼ˆæœ‰æ›´æ”¹æ—¶æ‹’ç»åˆ é™¤ï¼Œé™¤é `--force`ï¼‰
- æ£€æŸ¥åˆ†æ”¯åˆå¹¶çŠ¶æ€ï¼ˆæœªåˆå¹¶æ—¶æ˜¾ç¤ºè­¦å‘Šï¼‰

**åˆ é™¤æµç¨‹ï¼š**
1. æ˜¾ç¤ºå°†è¦åˆ é™¤çš„ worktree ä¿¡æ¯
2. è¯¢é—®ç”¨æˆ·ç¡®è®¤ï¼ˆå¯ç”¨ `--yes` è·³è¿‡ï¼‰
3. æ‰§è¡Œ `git worktree remove`
4. è¯¢é—®æ˜¯å¦åŒæ—¶åˆ é™¤æœ¬åœ°åˆ†æ”¯
5. å¦‚æœå½“å‰åœ¨è¢«åˆ é™¤çš„ worktree ä¸­ï¼Œè‡ªåŠ¨åˆ‡æ¢åˆ°ä¸»åˆ†æ”¯ç›®å½•

### ç¤ºä¾‹

**åŸºæœ¬åˆ é™¤ï¼š**

```bash
# åœ¨ worktree ç›®å½•ä¸­åˆ é™¤
$ cd worktrees/task-1
$ colyn remove

# é€šè¿‡ ID åˆ é™¤
$ colyn remove 1

# é€šè¿‡åˆ†æ”¯ååˆ é™¤
$ colyn remove feature/login
```

**å¼ºåˆ¶åˆ é™¤ï¼ˆå¿½ç•¥æœªæäº¤æ›´æ”¹ï¼‰ï¼š**

```bash
$ colyn remove 1 --force
```

**å¿«é€Ÿåˆ é™¤ï¼ˆè·³è¿‡ç¡®è®¤ï¼‰ï¼š**

```bash
$ colyn remove 1 -y
```

### æ‰§è¡Œç»“æœ

```
å°†è¦åˆ é™¤çš„ worktree:
  ID: 1
  åˆ†æ”¯: feature/login
  è·¯å¾„: /path/to/worktrees/task-1
  ç«¯å£: 10001

? ç¡®å®šè¦åˆ é™¤è¿™ä¸ª worktree å—ï¼Ÿ(y/N) â€º Yes
âœ” Worktree å·²åˆ é™¤

? æ˜¯å¦åŒæ—¶åˆ é™¤æœ¬åœ°åˆ†æ”¯ "feature/login"ï¼Ÿ(Y/n) â€º Yes
âœ” åˆ†æ”¯ "feature/login" å·²åˆ é™¤

âœ“ Worktree å·²åˆ é™¤

åˆ é™¤ä¿¡æ¯:
  ID: 1
  åˆ†æ”¯: feature/login (å·²åˆ é™¤)
  è·¯å¾„: /path/to/worktrees/task-1

å·²è‡ªåŠ¨åˆ‡æ¢åˆ°ä¸»åˆ†æ”¯ç›®å½•:
  /path/to/my-project

ğŸ“‚ å·²åˆ‡æ¢åˆ°: /path/to/my-project
```

### åˆ é™¤æœªåˆå¹¶çš„åˆ†æ”¯

```
å°†è¦åˆ é™¤çš„ worktree:
  ID: 2
  åˆ†æ”¯: feature/experimental
  è·¯å¾„: /path/to/worktrees/task-2
  ç«¯å£: 10002

âš  åˆ†æ”¯ "feature/experimental" å°šæœªåˆå¹¶åˆ° main
  åˆ é™¤åå¯èƒ½ä¸¢å¤±æœªåˆå¹¶çš„æ›´æ”¹

? ç¡®å®šè¦åˆ é™¤è¿™ä¸ª worktree å—ï¼Ÿ(y/N) â€º Yes
âœ” Worktree å·²åˆ é™¤

? æ˜¯å¦åŒæ—¶åˆ é™¤æœ¬åœ°åˆ†æ”¯ "feature/experimental"ï¼Ÿ(y/N) â€º Yes
âœ” åˆ†æ”¯ "feature/experimental" å·²åˆ é™¤ï¼ˆä½¿ç”¨ git branch -D å¼ºåˆ¶åˆ é™¤ï¼‰

âœ“ Worktree å·²åˆ é™¤
```

### æœ‰æœªæäº¤æ›´æ”¹æ—¶åˆ é™¤

```
å°†è¦åˆ é™¤çš„ worktree:
  ID: 1
  åˆ†æ”¯: feature/login
  è·¯å¾„: /path/to/worktrees/task-1

âš  æ£€æµ‹åˆ°æœªæäº¤çš„æ›´æ”¹

å˜æ›´æ–‡ä»¶:
  - src/login.ts
  - src/auth.ts
  ... ä»¥åŠå…¶ä»– 3 ä¸ªæ–‡ä»¶

âœ— æ— æ³•åˆ é™¤ï¼šå­˜åœ¨æœªæäº¤çš„æ›´æ”¹
  æç¤º: è¯·å…ˆæäº¤æˆ–æš‚å­˜æ›´æ”¹ï¼Œæˆ–ä½¿ç”¨ --force å¼ºåˆ¶åˆ é™¤ï¼š
  cd "/path/to/worktrees/task-1"
  git add . && git commit -m "..."

æˆ–è€…å¼ºåˆ¶åˆ é™¤ï¼š
  colyn remove 1 --force
```

### å¸¸è§é”™è¯¯

| é”™è¯¯åœºæ™¯ | é”™è¯¯ä¿¡æ¯ | è§£å†³æ–¹æ³• |
|---------|---------|---------|
| æœªåˆå§‹åŒ– | `âœ— å½“å‰ç›®å½•æœªåˆå§‹åŒ–` | è¿è¡Œ `colyn init` |
| Worktree ä¸å­˜åœ¨ | `âœ— æ‰¾ä¸åˆ° worktree` | æ£€æŸ¥ ID æˆ–åˆ†æ”¯åï¼Œè¿è¡Œ `colyn list` æŸ¥çœ‹ |
| æœ‰æœªæäº¤æ›´æ”¹ | `âœ— æ— æ³•åˆ é™¤ï¼šå­˜åœ¨æœªæäº¤çš„æ›´æ”¹` | æäº¤æ›´æ”¹æˆ–ä½¿ç”¨ `--force` |

### æç¤º

- åˆ é™¤å‰ä¼šæ£€æŸ¥æœªæäº¤æ›´æ”¹ï¼Œé˜²æ­¢æ„å¤–ä¸¢å¤±å·¥ä½œ
- æœªåˆå¹¶åˆ†æ”¯åªæ˜¾ç¤ºè­¦å‘Šï¼Œå…è®¸ç»§ç»­åˆ é™¤
- åˆ†æ”¯åˆ é™¤ä½¿ç”¨å®‰å…¨åˆ é™¤ï¼ˆ`-d`ï¼‰æˆ–å¼ºåˆ¶åˆ é™¤ï¼ˆ`-D`ï¼‰ï¼Œå–å†³äºæ˜¯å¦å·²åˆå¹¶
- å¦‚æœå½“å‰åœ¨è¢«åˆ é™¤çš„ worktree ä¸­ï¼Œä¼šè‡ªåŠ¨åˆ‡æ¢åˆ°ä¸»åˆ†æ”¯ç›®å½•
- å¯ä»¥åœ¨é¡¹ç›®çš„ä»»æ„ä½ç½®è¿è¡Œ

---

## colyn checkout

åœ¨ Worktree ä¸­åˆ‡æ¢æˆ–åˆ›å»ºåˆ†æ”¯ã€‚

### è¯­æ³•

```bash
colyn checkout [worktree-id] <branch> [é€‰é¡¹]

# åˆ«å
colyn co [worktree-id] <branch> [é€‰é¡¹]
```

### å‚æ•°

| å‚æ•° | å¿…å¡« | è¯´æ˜ |
|------|------|------|
| `worktree-id` | å¦ | Worktree çš„ IDï¼Œçœç•¥æ—¶ä½¿ç”¨å½“å‰ worktree |
| `branch` | æ˜¯ | ç›®æ ‡åˆ†æ”¯åç§° |

### é€‰é¡¹

| é€‰é¡¹ | è¯´æ˜ |
|------|------|
| `--no-fetch` | è·³è¿‡ä»è¿œç¨‹è·å–åˆ†æ”¯ä¿¡æ¯ |

### åŠŸèƒ½è¯´æ˜

`colyn checkout` å…è®¸åœ¨ worktree ä¸­åˆ‡æ¢åˆ†æ”¯ï¼Œå¤ç”¨å·²æœ‰ worktree è¿›è¡Œä¸åŒåˆ†æ”¯çš„å¼€å‘ã€‚

**å‰ç½®æ£€æŸ¥ï¼š**
- æœ‰æœªæäº¤æ›´æ”¹ â†’ æ‹’ç»åˆ‡æ¢
- å½“å‰åˆ†æ”¯æœªåˆå¹¶åˆ°ä¸»åˆ†æ”¯ â†’ è­¦å‘Šå¹¶è¦æ±‚ç¡®è®¤
- ç›®æ ‡åˆ†æ”¯æ˜¯ä¸»åˆ†æ”¯ â†’ æ‹’ç»åˆ‡æ¢
- ç›®æ ‡åˆ†æ”¯å·²åœ¨å…¶ä»– worktree ä½¿ç”¨ â†’ æ‹’ç»åˆ‡æ¢

**åˆ†æ”¯å¤„ç†ï¼š**
1. æœ¬åœ°åˆ†æ”¯å­˜åœ¨ â†’ ç›´æ¥åˆ‡æ¢
2. è¿œç¨‹åˆ†æ”¯å­˜åœ¨ â†’ è‡ªåŠ¨åˆ›å»ºæœ¬åœ°åˆ†æ”¯å¹¶è·Ÿè¸ªè¿œç¨‹
3. åˆ†æ”¯ä¸å­˜åœ¨ â†’ è‡ªåŠ¨åˆ›å»ºæ–°åˆ†æ”¯

**æ—¥å¿—å½’æ¡£ï¼š**
- åˆ‡æ¢æˆåŠŸåï¼Œè‡ªåŠ¨å½’æ¡£å½“å‰åˆ†æ”¯çš„å·¥ä½œæ—¥å¿—åˆ° `.claude/logs/archived/<æ—§åˆ†æ”¯å>/`

**æ—§åˆ†æ”¯æ¸…ç†ï¼š**
- å¦‚æœæ—§åˆ†æ”¯å·²åˆå¹¶åˆ°ä¸»åˆ†æ”¯ï¼Œæç¤ºç”¨æˆ·æ˜¯å¦åˆ é™¤

**æ‰§è¡Œåï¼š**
- è‡ªåŠ¨åˆ‡æ¢åˆ°ç›®æ ‡ worktree ç›®å½•

### ç¤ºä¾‹

**åœ¨å½“å‰ worktree ä¸­åˆ‡æ¢åˆ†æ”¯ï¼š**

```bash
$ cd worktrees/task-1
$ colyn checkout feature/new-login
# æˆ–ä½¿ç”¨åˆ«å
$ colyn co feature/new-login
```

**æŒ‡å®š worktree ID åˆ‡æ¢åˆ†æ”¯ï¼š**

```bash
$ colyn checkout 1 feature/new-login
$ colyn co 1 feature/new-login
```

**è·³è¿‡è¿œç¨‹è·å–ï¼š**

```bash
$ colyn checkout feature/test --no-fetch
```

### æ‰§è¡Œç»“æœï¼ˆæ—§åˆ†æ”¯å·²åˆå¹¶ï¼‰

```
âœ“ å·²åˆ‡æ¢åˆ°åˆ†æ”¯ feature/new-login

âœ“ åˆ†æ”¯ feature/old å·²åˆå¹¶åˆ°ä¸»åˆ†æ”¯
? æ˜¯å¦åˆ é™¤æ—§åˆ†æ”¯ feature/oldï¼Ÿ (Y/n) y
âœ“ å·²åˆ é™¤åˆ†æ”¯ feature/old

æ—¥å¿—å·²å½’æ¡£åˆ°: .claude/logs/archived/feature-old/
æ—§åˆ†æ”¯ feature/old å·²åˆ é™¤

å½“å‰çŠ¶æ€ï¼š
  Worktree: task-1
  åˆ†æ”¯: feature/new-login
  è·¯å¾„: /path/to/worktrees/task-1

ğŸ“‚ å·²åˆ‡æ¢åˆ°: /path/to/worktrees/task-1
```

### æ‰§è¡Œç»“æœï¼ˆæ—§åˆ†æ”¯æœªåˆå¹¶ï¼‰

```
âš  å½“å‰åˆ†æ”¯ feature/old å°šæœªåˆå¹¶åˆ°ä¸»åˆ†æ”¯

å¦‚æœåˆ‡æ¢åˆ†æ”¯ï¼Œè¿™äº›æ›´æ”¹å°†ä¿ç•™åœ¨åŸåˆ†æ”¯ä¸Šã€‚
? æ˜¯å¦ç»§ç»­åˆ‡æ¢ï¼Ÿ (y/N) y

âœ“ å·²åˆ‡æ¢åˆ°åˆ†æ”¯ feature/new-login

æ—¥å¿—å·²å½’æ¡£åˆ°: .claude/logs/archived/feature-old/

å½“å‰çŠ¶æ€ï¼š
  Worktree: task-1
  åˆ†æ”¯: feature/new-login
  è·¯å¾„: /path/to/worktrees/task-1

ğŸ“‚ å·²åˆ‡æ¢åˆ°: /path/to/worktrees/task-1
```

### å¸¸è§é”™è¯¯

| é”™è¯¯åœºæ™¯ | é”™è¯¯ä¿¡æ¯ | è§£å†³æ–¹æ³• |
|---------|---------|---------|
| æœ‰æœªæäº¤æ›´æ”¹ | `âœ— worktree ä¸­æœ‰æœªæäº¤çš„æ›´æ”¹` | æäº¤æ›´æ”¹æˆ–ä½¿ç”¨ `git stash` |
| ç›®æ ‡åˆ†æ”¯å·²è¢«ä½¿ç”¨ | `âœ— åˆ†æ”¯å·²åœ¨å…¶ä»– worktree ä¸­ä½¿ç”¨` | åˆ‡æ¢åˆ°å¯¹åº” worktreeï¼Œæˆ–ä½¿ç”¨å…¶ä»–åˆ†æ”¯å |
| ç›®æ ‡æ˜¯ä¸»åˆ†æ”¯ | `âœ— ä¸èƒ½åœ¨ worktree ä¸­åˆ‡æ¢åˆ°ä¸»åˆ†æ”¯` | ç›´æ¥ä½¿ç”¨ä¸»åˆ†æ”¯ç›®å½• |

### æç¤º

- å¯ä»¥å¤ç”¨å·²æœ‰ worktree è¿›è¡Œä¸åŒåˆ†æ”¯çš„å¼€å‘
- åˆ‡æ¢å‰ä¼šè‡ªåŠ¨å½’æ¡£ `.claude/logs/` ç›®å½•ä¸‹çš„æ—¥å¿—æ–‡ä»¶
- fetch æˆåŠŸåä¼šè‡ªåŠ¨æ›´æ–°ä¸»åˆ†æ”¯ï¼ˆå¦‚æœä¸»åˆ†æ”¯è½åäºè¿œç¨‹ï¼‰
- å·²åˆå¹¶çš„æ—§åˆ†æ”¯å¯é€‰åˆ é™¤

---

## colyn info

æ˜¾ç¤ºå½“å‰ç›®å½•çš„é¡¹ç›®ä¿¡æ¯ã€‚

### è¯­æ³•

```bash
colyn info [é€‰é¡¹]
```

### é€‰é¡¹

| é€‰é¡¹ | çŸ­é€‰é¡¹ | è¯´æ˜ |
|------|--------|------|
| `--short` | `-S` | è¾“å‡ºç®€çŸ­æ ‡è¯†ç¬¦ï¼ˆå¸¦åˆ†æ”¯ä¿¡æ¯ï¼‰ï¼Œæ”¯æŒé™çº§ |
| `--field=<name>` | `-f <name>` | è¾“å‡ºæŒ‡å®šå­—æ®µï¼ˆå¯å¤šæ¬¡ä½¿ç”¨ï¼‰ |
| `--format=<template>` | - | ä½¿ç”¨æ¨¡æ¿å­—ç¬¦ä¸²æ ¼å¼åŒ–è¾“å‡º |
| `--separator=<char>` | `-s <char>` | å¤šå­—æ®µæ—¶çš„åˆ†éš”ç¬¦ï¼ˆé»˜è®¤ tabï¼‰ |

### å¯ç”¨å­—æ®µ

| å­—æ®µå | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|--------|
| `project` | ä¸»ç›®å½•åç§° | `myapp` |
| `project-path` | ä¸»ç›®å½•å®Œæ•´è·¯å¾„ | `/Users/me/work/myapp/myapp` |
| `worktree-id` | Worktree IDï¼ˆä¸»åˆ†æ”¯ä¸º 0ï¼‰ | `1` |
| `worktree-dir` | Worktree ç›®å½•å | `task-1` |
| `branch` | å½“å‰åˆ†æ”¯åç§° | `feature/login` |

### åŠŸèƒ½è¯´æ˜

`colyn info` æ”¯æŒå¤šç§è¾“å‡ºæ ¼å¼ï¼Œé€‚åº”ä¸åŒä½¿ç”¨åœºæ™¯ï¼š

#### 1. ç®€çŸ­æ ‡è¯†ç¬¦ï¼ˆ`--short`ï¼‰
- è¾“å‡ºæ ¼å¼ï¼š`{project}/{worktree-dir} (â‡ {branch})`
- æ”¯æŒæ™ºèƒ½é™çº§ï¼šColyn é¡¹ç›® â†’ Git ä»“åº“ â†’ æ™®é€šç›®å½•
- æ¨èç”¨äº shell æç¤ºç¬¦

#### 2. å®Œæ•´ä¿¡æ¯ï¼ˆé»˜è®¤ï¼‰
- æ˜¾ç¤ºæ‰€æœ‰å­—æ®µï¼Œå¸¦é¢œè‰²å’Œå›¾æ ‡
- ä¾¿äºäººå·¥æŸ¥çœ‹

#### 3. å­—æ®µè¾“å‡ºï¼ˆ`--field`ï¼‰
- è¾“å‡ºçº¯æ–‡æœ¬ï¼Œé€‚åˆè„šæœ¬ä½¿ç”¨
- å¯æŒ‡å®šå¤šä¸ªå­—æ®µ

#### 4. æ¨¡æ¿æ ¼å¼ï¼ˆ`--format`ï¼‰
- ä½¿ç”¨ `{field-name}` å ä½ç¬¦
- çµæ´»çš„è‡ªå®šä¹‰æ ¼å¼

### ç¤ºä¾‹

**æ˜¾ç¤ºå®Œæ•´ä¿¡æ¯ï¼ˆé»˜è®¤ï¼‰ï¼š**

```bash
$ colyn info
ğŸ“ Project:      myapp
ğŸ“‚ Project Path: /Users/me/work/myapp/myapp
ğŸ”¢ Worktree ID:  1
ğŸ“ Worktree Dir: task-1
ğŸŒ¿ Branch:       feature/login
```

**è¾“å‡ºç®€çŸ­æ ‡è¯†ç¬¦ï¼ˆæ¨èç”¨äº shell æç¤ºç¬¦ï¼‰ï¼š**

```bash
# åœ¨ colyn é¡¹ç›®ä¸­
$ colyn info --short
myapp/task-1 (â‡ feature/login)

# åœ¨ git ä»“åº“ä¸­ï¼ˆæœªåˆå§‹åŒ– colynï¼‰
$ colyn info --short
my-repo (â‡ main)

# åœ¨é git ç›®å½•ä¸­
$ colyn info --short
my-folder
```

**åœ¨ shell æç¤ºç¬¦ä¸­ä½¿ç”¨ï¼š**

```bash
# æ·»åŠ åˆ° .zshrc æˆ– .bashrc
PS1='[$(colyn info -S)] $ '

# æ•ˆæœ
[myapp/task-1 (â‡ feature/login)] $
```

**è·å–å•ä¸ªå­—æ®µï¼š**

```bash
$ colyn info -f branch
feature/login

$ colyn info --field=project-path
/Users/me/work/myapp/myapp
```

**è·å–å¤šä¸ªå­—æ®µï¼š**

```bash
# é»˜è®¤ç”¨ tab åˆ†éš”
$ colyn info -f project -f branch
myapp	feature/login

# è‡ªå®šä¹‰åˆ†éš”ç¬¦
$ colyn info -f project -f branch -s "/"
myapp/feature/login

$ colyn info -f project -f worktree-id -s ":"
myapp:1
```

**æ¨¡æ¿å­—ç¬¦ä¸²æ ¼å¼åŒ–ï¼š**

```bash
$ colyn info --format="{project}/{worktree-dir}"
myapp/task-1

$ colyn info --format="å½“å‰åœ¨ {branch} åˆ†æ”¯å·¥ä½œ"
å½“å‰åœ¨ feature/login åˆ†æ”¯å·¥ä½œ

$ colyn info --format="{project}:{worktree-id}:{branch}"
myapp:1:feature/login
```

### ä½ç½®è¦æ±‚

**ä½¿ç”¨ `--short` é€‰é¡¹ï¼š**
- æ”¯æŒåœ¨ä»»ä½•ä½ç½®è¿è¡Œï¼Œä¼šè‡ªåŠ¨é™çº§

**ä½¿ç”¨å…¶ä»–é€‰é¡¹ï¼š**
- å¿…é¡»åœ¨ä¸»åˆ†æ”¯ç›®å½•æˆ– worktree ç›®å½•ä¸­æ‰§è¡Œ
- åœ¨å…¶ä»–ä½ç½®æ‰§è¡Œä¼šæŠ¥é”™

### å¸¸è§é”™è¯¯

| é”™è¯¯åœºæ™¯ | é”™è¯¯ä¿¡æ¯ | è§£å†³æ–¹æ³• |
|---------|---------|---------|
| ä¸åœ¨å·¥ä½œç›®å½• | `âœ— å½“å‰ç›®å½•ä¸åœ¨ worktree æˆ–ä¸»åˆ†æ”¯ä¸­` | åˆ‡æ¢åˆ°ä¸»åˆ†æ”¯ç›®å½•æˆ– worktree ç›®å½• |
| æ— æ•ˆå­—æ®µå | `âœ— æ— æ•ˆçš„å­—æ®µå` | ä½¿ç”¨æ­£ç¡®çš„å­—æ®µå |

### æç¤º

- `--short` é€‰é¡¹æ”¯æŒæ™ºèƒ½é™çº§ï¼Œå¯åœ¨ä»»ä½•ç›®å½•ä½¿ç”¨
- é€‚åˆé›†æˆåˆ° shell æç¤ºç¬¦ã€ç»ˆç«¯æ ‡é¢˜æˆ–æ—¥å¿—å‰ç¼€
- å­—æ®µè¾“å‡ºé€‚åˆåœ¨è„šæœ¬ä¸­ä½¿ç”¨

---

## colyn repair

æ£€æŸ¥å¹¶ä¿®å¤é¡¹ç›®é…ç½®ã€‚

### è¯­æ³•

```bash
colyn repair
```

### åŠŸèƒ½è¯´æ˜

`colyn repair` ç”¨äºç§»åŠ¨é¡¹ç›®ç›®å½•åæˆ–é…ç½®å‡ºç°é—®é¢˜æ—¶ï¼Œè‡ªåŠ¨æ£€æŸ¥å¹¶ä¿®å¤é¡¹ç›®é…ç½®ã€‚

**æ£€æŸ¥å’Œä¿®å¤å†…å®¹ï¼š**

1. **ä¸»åˆ†æ”¯ .env.local**
   - æ£€æŸ¥ PORT å’Œ WORKTREE ç¯å¢ƒå˜é‡
   - WORKTREE å¿…é¡»ä¸º "main"

2. **Worktree .env.local**
   - æ£€æŸ¥ PORT å’Œ WORKTREE ç¯å¢ƒå˜é‡
   - PORT å¿…é¡»ä¸º `ä¸»ç«¯å£ + ID`
   - WORKTREE å¿…é¡»ä¸º ID

3. **Git worktree è¿æ¥**
   - è¿è¡Œ `git worktree repair` ä¿®å¤è¿æ¥
   - ä¿®å¤ä¸»åˆ†æ”¯ä¸ worktree çš„åŒå‘è¿æ¥

4. **å­¤å„¿ worktree ç›®å½•**
   - æ£€æµ‹è·¯å¾„å¤±æ•ˆçš„ worktreeï¼ˆå¯ä¿®å¤ï¼‰
   - æ£€æµ‹çœŸå­¤å„¿å‹ worktreeï¼ˆä»…æŠ¥å‘Šï¼‰

**Tmux é›†æˆï¼š**
- å¦‚æœ session ä¸å­˜åœ¨åˆ™åˆ›å»º
- å¦‚æœ window ä¸å­˜åœ¨åˆ™åˆ›å»ºå¹¶è®¾ç½® 3-pane å¸ƒå±€

### ä½¿ç”¨åœºæ™¯

```bash
# ç§»åŠ¨é¡¹ç›®ç›®å½•å
$ mv ~/project ~/Desktop/project
$ cd ~/Desktop/project

# è¿è¡Œä¿®å¤
$ colyn repair
âœ” æ£€æµ‹å¹¶ä¿®å¤å­¤å„¿ worktree ç›®å½•...
âœ” å·²ä¿®å¤ 2 ä¸ªè·¯å¾„å¤±æ•ˆçš„ worktree
âœ” åˆ›å»ºäº† session "project" å’Œ 3 ä¸ª window

âœ“ ä¿®å¤å®Œæˆï¼
```

### æ‰§è¡Œç»“æœ

```
âœ” æ£€æŸ¥ä¸»åˆ†æ”¯ .env.local
âœ” æ£€æŸ¥ worktree task-1 .env.local
âœ— ä¿®å¤ worktree task-2 .env.local
  - PORT: 10005 â†’ 10002
  - WORKTREE: 3 â†’ 2
âœ” ä¿®å¤ git worktree è¿æ¥
âœ” æ£€æŸ¥å­¤å„¿ worktree ç›®å½•

âœ“ ä¿®å¤å®Œæˆï¼

ä¿®å¤æ‘˜è¦ï¼š
  âœ“ ä¿®å¤äº† 1 ä¸ª .env.local æ–‡ä»¶
  âœ“ Git worktree è¿æ¥å·²ä¿®å¤
  âœ“ æœªå‘ç°å­¤å„¿ worktree ç›®å½•

è¯¦ç»†ä¿¡æ¯ï¼š
  ä¸»åˆ†æ”¯ï¼š
    âœ“ .env.local é…ç½®æ­£ç¡®

  Worktree task-1ï¼š
    âœ“ .env.local é…ç½®æ­£ç¡®

  Worktree task-2ï¼š
    âœ— PORT é”™è¯¯ï¼š10005 â†’ 10002
    âœ— WORKTREE é”™è¯¯ï¼š3 â†’ 2
```

### å­¤å„¿ worktree æ£€æµ‹

**è·¯å¾„å¤±æ•ˆå‹ï¼ˆå¯ä¿®å¤ï¼‰ï¼š**
- åŸå› ï¼šé¡¹ç›®ç›®å½•è¢«ç§»åŠ¨æˆ–æ”¹å
- å¤„ç†ï¼šä½¿ç”¨ `git worktree repair <new-path>` ä¿®å¤è·¯å¾„

**çœŸå­¤å„¿å‹ï¼ˆä»…æŠ¥å‘Šï¼‰ï¼š**
- åŸå› ï¼šæ‰‹åŠ¨åˆ é™¤äº† worktreeï¼Œæˆ– git æ•°æ®æŸå
- å¤„ç†ï¼šä»…æŠ¥å‘Šï¼Œå»ºè®®ç”¨æˆ·æ‰‹åŠ¨æ¸…ç†

```
âœ“ ä¿®å¤å®Œæˆï¼

ä¿®å¤æ‘˜è¦ï¼š
  âœ“ æ£€æŸ¥äº† 3 ä¸ª .env.local æ–‡ä»¶ï¼Œæ— é—®é¢˜
  âœ“ Git worktree è¿æ¥æ­£å¸¸
  âš  å‘ç° 1 ä¸ªå­¤å„¿ worktree ç›®å½•ï¼š
    - worktrees/task-3 (ç›®å½•å­˜åœ¨ä½† git ä¸è¯†åˆ«)

å»ºè®®æ“ä½œï¼š
  è¿è¡Œ colyn remove å‘½ä»¤æ¸…ç†ï¼Œæˆ–æ‰‹åŠ¨åˆ é™¤ç›®å½•
```

### å¸¸è§é”™è¯¯

| é”™è¯¯åœºæ™¯ | ç³»ç»Ÿè¡Œä¸º |
|---------|---------|
| é¡¹ç›®æœªåˆå§‹åŒ– | æŠ¥é”™é€€å‡ºï¼Œæç¤ºå…ˆè¿è¡Œ `colyn init` |
| ä¸æ˜¯ git ä»“åº“ | æŠ¥é”™é€€å‡ºï¼Œæç¤ºç¡®ä¿åœ¨ git é¡¹ç›®ä¸­è¿è¡Œ |
| git worktree repair å¤±è´¥ | è®°å½•é”™è¯¯ï¼Œç»§ç»­å…¶ä»–æ£€æŸ¥ |
| æ— æ³•å†™å…¥ .env.local | è®°å½•é”™è¯¯ï¼Œç»§ç»­å…¶ä»–æ£€æŸ¥ |

### æç¤º

- ç§»åŠ¨é¡¹ç›®ç›®å½•åå»ºè®®ç«‹å³è¿è¡Œ
- é‡‡ç”¨"å°½åŠ›è€Œä¸º"ç­–ç•¥ï¼Œå•ä¸ªé”™è¯¯ä¸ä¼šä¸­æ–­æµç¨‹
- åªä¿®å¤æ˜ç¡®çš„é…ç½®é”™è¯¯ï¼Œä¸åˆ é™¤æ–‡ä»¶
- å¯ä»¥åœ¨é¡¹ç›®çš„ä»»æ„ä½ç½®è¿è¡Œ

---

## colyn completion

ç”Ÿæˆ shell è‡ªåŠ¨è¡¥å…¨è„šæœ¬ã€‚

### è¯­æ³•

```bash
colyn completion [shell] [é€‰é¡¹]
```

### å‚æ•°

| å‚æ•° | å¿…å¡« | è¯´æ˜ |
|------|------|------|
| `shell` | å¦ | Shell ç±»å‹ï¼ˆbash æˆ– zshï¼‰ |

### é€‰é¡¹

| é€‰é¡¹ | è¯´æ˜ |
|------|------|
| `--install` | æ˜¾ç¤ºå®‰è£…è¯´æ˜ |

### åŠŸèƒ½è¯´æ˜

`colyn completion` ç”Ÿæˆ shell è‡ªåŠ¨è¡¥å…¨è„šæœ¬ï¼Œæ”¯æŒï¼š
- å‘½ä»¤è¡¥å…¨
- é€‰é¡¹è¡¥å…¨
- å‚æ•°è¡¥å…¨ï¼ˆå®æ—¶æŸ¥è¯¢ worktree åˆ—è¡¨ï¼‰

### ç¤ºä¾‹

**è¾“å‡ºè¡¥å…¨è„šæœ¬ï¼š**

```bash
# è¾“å‡º bash è¡¥å…¨è„šæœ¬
$ colyn completion bash

# è¾“å‡º zsh è¡¥å…¨è„šæœ¬
$ colyn completion zsh
```

**æ˜¾ç¤ºå®‰è£…è¯´æ˜ï¼š**

```bash
$ colyn completion zsh --install
```

**æ‰‹åŠ¨å®‰è£…ï¼š**

```bash
# Bash
$ colyn completion bash > ~/.colyn-completion.bash
$ echo "source ~/.colyn-completion.bash" >> ~/.bashrc

# Zsh
$ colyn completion zsh > ~/.colyn-completion.zsh
$ echo "source ~/.colyn-completion.zsh" >> ~/.zshrc
```

### æç¤º

- `colyn system-integration` å‘½ä»¤ä¼šè‡ªåŠ¨é…ç½®è¡¥å…¨è„šæœ¬
- æ”¯æŒåŠ¨æ€è¡¥å…¨ worktree ID å’Œåˆ†æ”¯å
- Tab é”®å¯è‡ªåŠ¨å®Œæˆå‘½ä»¤å’Œå‚æ•°

---

## colyn system-integration

é…ç½® shell é›†æˆï¼ˆæ”¯æŒè‡ªåŠ¨ç›®å½•åˆ‡æ¢å’Œå‘½ä»¤è¡¥å…¨ï¼‰ã€‚

### è¯­æ³•

```bash
colyn system-integration
```

### åŠŸèƒ½è¯´æ˜

`colyn system-integration` è‡ªåŠ¨å®Œæˆ shell é›†æˆé…ç½®ï¼š

**æ£€æµ‹å’Œé…ç½®ï¼š**
1. æ£€æµ‹ shell ç±»å‹ï¼ˆbash/zshï¼‰
2. æ£€æµ‹ shell é…ç½®æ–‡ä»¶è·¯å¾„
3. å®šä½ colyn.sh æ–‡ä»¶è·¯å¾„
4. æ·»åŠ  shell é›†æˆåˆ°é…ç½®æ–‡ä»¶
5. æ·»åŠ è¡¥å…¨è„šæœ¬åˆ°é…ç½®æ–‡ä»¶

**æ›´æ–°ç­–ç•¥ï¼š**
- å¦‚æœé…ç½®å·²å­˜åœ¨ï¼šæ›´æ–°è·¯å¾„
- å¦‚æœé…ç½®ä¸å­˜åœ¨ï¼šè¿½åŠ æ–°é…ç½®
- ä¿æŒå…¶ä»–é…ç½®ä¸å˜

### ä½¿ç”¨åœºæ™¯

**é¦–æ¬¡å®‰è£…åé…ç½®ï¼š**

```bash
# å®‰è£… colyn
$ npm install -g colyn

# é…ç½® shell é›†æˆ
$ colyn system-integration

æ£€æµ‹ç³»ç»Ÿç¯å¢ƒ...
âœ“ Shell ç±»å‹: zsh
âœ“ é…ç½®æ–‡ä»¶: /Users/username/.zshrc
âœ“ Colyn å®‰è£…è·¯å¾„: /Users/username/.volta/tools/image/packages/colyn/lib/node_modules/colyn

é…ç½® shell é›†æˆ...
âœ“ å·²æ·»åŠ  shell é›†æˆåˆ° ~/.zshrc
âœ“ å·²æ·»åŠ è¡¥å…¨è„šæœ¬åˆ° ~/.zshrc

âœ“ å®‰è£…å®Œæˆï¼

ç”Ÿæ•ˆé…ç½®ï¼š
  æ–¹å¼ 1ï¼ˆæ¨èï¼‰ï¼šé‡æ–°æ‰“å¼€ç»ˆç«¯
  æ–¹å¼ 2ï¼šè¿è¡Œå‘½ä»¤ï¼šsource ~/.zshrc

åŠŸèƒ½è¯´æ˜ï¼š
  âœ“ colyn å‘½ä»¤æ”¯æŒè‡ªåŠ¨ç›®å½•åˆ‡æ¢
  âœ“ ä½¿ç”¨ Tab é”®å¯è‡ªåŠ¨å®Œæˆå‘½ä»¤å’Œå‚æ•°
```

**æ›´æ–°å·²æœ‰é…ç½®ï¼š**

```bash
$ colyn system-integration

æ£€æµ‹ç³»ç»Ÿç¯å¢ƒ...
âœ“ Shell ç±»å‹: zsh
âœ“ é…ç½®æ–‡ä»¶: /Users/username/.zshrc
âœ“ Colyn å®‰è£…è·¯å¾„: /Users/username/.volta/tools/image/packages/colyn/lib/node_modules/colyn

é…ç½® shell é›†æˆ...
âœ“ å·²æ›´æ–° ~/.zshrc ä¸­çš„ shell é›†æˆé…ç½®
âœ“ å·²æ›´æ–°è¡¥å…¨è„šæœ¬é…ç½®

âœ“ æ›´æ–°å®Œæˆï¼

ç”Ÿæ•ˆé…ç½®ï¼š
  è¿è¡Œå‘½ä»¤ï¼šsource ~/.zshrc
```

### å¸¸è§é”™è¯¯

| é”™è¯¯åœºæ™¯ | é”™è¯¯ä¿¡æ¯ | è§£å†³æ–¹æ³• |
|---------|---------|---------|
| æ‰¾ä¸åˆ° colyn.sh | `âœ— æ‰¾ä¸åˆ° shell é›†æˆè„šæœ¬` | æ£€æŸ¥ colyn å®‰è£…æ˜¯å¦å®Œæ•´ï¼Œé‡æ–°å®‰è£… |
| æ— æ³•å†™å…¥é…ç½®æ–‡ä»¶ | `âœ— æ— æ³•å†™å…¥é…ç½®æ–‡ä»¶` | æ£€æŸ¥æ–‡ä»¶æƒé™æˆ–æ‰‹åŠ¨æ·»åŠ é…ç½® |
| Windows å¹³å° | `âš  Windows å¹³å°æš‚ä¸æ”¯æŒè‡ªåŠ¨é…ç½®` | æŸ¥çœ‹ README.md ä¸­çš„ Windows é…ç½®è¯´æ˜ |

### æç¤º

- npm å…¨å±€å®‰è£…åå»ºè®®ç«‹å³è¿è¡Œ
- æ”¯æŒ macOS å’Œ Linux
- æ”¯æŒ bash å’Œ zsh
- é…ç½®åéœ€è¦é‡æ–°æ‰“å¼€ç»ˆç«¯æˆ–è¿è¡Œ `source` å‘½ä»¤ç”Ÿæ•ˆ
- ä¸ä¼šè¦†ç›–ç”¨æˆ·é…ç½®æ–‡ä»¶çš„å…¶ä»–å†…å®¹

---

## colyn release

å‘å¸ƒæ–°ç‰ˆæœ¬ã€‚

### è¯­æ³•

```bash
colyn release <version-type>
```

### å‚æ•°

| å‚æ•° | å¿…å¡« | è¯´æ˜ |
|------|------|------|
| `version-type` | æ˜¯ | ç‰ˆæœ¬ç±»å‹æˆ–æ˜¾å¼ç‰ˆæœ¬å·ï¼š<br>- `patch` / `minor` / `major`<br>- æ˜¾å¼ç‰ˆæœ¬å·ï¼š`1.2.3` |

### åŠŸèƒ½è¯´æ˜

`colyn release` æä¾›ç»Ÿä¸€çš„å‘å¸ƒå…¥å£ï¼Œæ— è®ºä»å“ªä¸ªç›®å½•æ‰§è¡Œï¼Œå§‹ç»ˆåœ¨ä¸»åˆ†æ”¯ä¸­å®Œæˆå‘å¸ƒã€‚

**æ‰§è¡Œæµç¨‹ï¼š**
1. æ£€æŸ¥ git çŠ¶æ€ï¼ˆä¸»åˆ†æ”¯ï¼‰
2. è¿è¡Œ lint å’Œ build
3. æ›´æ–° package.json ç‰ˆæœ¬
4. åˆ›å»ºæäº¤ä¸ tag
5. æ¨é€åˆ°è¿œç¨‹

### è¿è¡Œä½ç½®è§„åˆ™

- å¿…é¡»åœ¨é¡¹ç›®ç›®å½•å†…æ‰§è¡Œï¼ˆä¸»åˆ†æ”¯æˆ–ä»»æ„ Worktree ç›®å½•ï¼‰
- ä¸å…è®¸åœ¨é¡¹ç›®ç›®å½•å¤–æ‰§è¡Œ
- å®é™…æ‰§è¡Œè·¯å¾„å§‹ç»ˆä¸ºä¸»åˆ†æ”¯ç›®å½•

### ç¤ºä¾‹

```bash
# åœ¨ worktree ä¸­å‘å¸ƒ patch ç‰ˆæœ¬
$ cd worktrees/task-1
$ colyn release patch

æ­¥éª¤ 1: æ£€æŸ¥ git çŠ¶æ€ (Main Branch)
âœ“ å·¥ä½œåŒºå¹²å‡€
...
âœ“ å‘å¸ƒå®Œæˆ

# åœ¨ä¸»åˆ†æ”¯ä¸­å‘å¸ƒ minor ç‰ˆæœ¬
$ cd my-project
$ colyn release minor

# å‘å¸ƒæŒ‡å®šç‰ˆæœ¬å·
$ colyn release 1.2.3
```

### å¸¸è§é”™è¯¯

| é”™è¯¯åœºæ™¯ | é”™è¯¯ä¿¡æ¯ | è§£å†³æ–¹æ³• |
|---------|---------|---------|
| åœ¨é¡¹ç›®å¤–æ‰§è¡Œ | `âœ— å½“å‰ç›®å½•ä¸å±äº Colyn é¡¹ç›®` | åœ¨é¡¹ç›®ç›®å½•å†…æ‰§è¡Œ |
| å‚æ•°ç¼ºå¤± | `âœ— ç¼ºå°‘ç‰ˆæœ¬ç±»å‹å‚æ•°` | æä¾› version-type å‚æ•° |
| ä¸»åˆ†æ”¯å·¥ä½œåŒºä¸å¹²å‡€ | `âœ— å·¥ä½œåŒºæœ‰æœªæäº¤æ›´æ”¹` | æäº¤æˆ– stash æ›´æ”¹ |

### æç¤º

- å¤ç”¨ç°æœ‰å‘å¸ƒè„šæœ¬é€»è¾‘
- æ— éœ€æ‰‹åŠ¨åˆ‡æ¢åˆ°ä¸»åˆ†æ”¯ç›®å½•
- å‘å¸ƒæµç¨‹ä¸ `yarn release:xxx` ä¿æŒä¸€è‡´

---

## æ€»ç»“

æœ¬å‘½ä»¤å‚è€ƒæ‰‹å†Œæ¶µç›–äº† Colyn çš„æ‰€æœ‰å‘½ä»¤ã€‚æ¯ä¸ªå‘½ä»¤éƒ½ï¼š
- æä¾›æ¸…æ™°çš„è¯­æ³•æ ¼å¼
- è¯´æ˜å‚æ•°å’Œé€‰é¡¹çš„ç”¨æ³•
- åŒ…å«å®é™…çš„ä½¿ç”¨ç¤ºä¾‹
- åˆ—å‡ºå¸¸è§é”™è¯¯å’Œè§£å†³æ–¹æ³•
- ç»™å‡ºå®ç”¨çš„æç¤º

å»ºè®®ç»“åˆ[å¿«é€Ÿå¼€å§‹æŒ‡å—](01-quick-start.md)å’Œ[æ ¸å¿ƒæ¦‚å¿µ](03-core-concepts.md)ä¸€èµ·é˜…è¯»ï¼Œä»¥æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ Colynã€‚
